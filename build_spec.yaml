version: 0.1          # debe ser exactamente 0.1
component: build      # indica que esto es un build spec

timeoutInSeconds: 3600  # opcional, tiempo mÃ¡ximo de ejecuciÃ³n (1 h)

steps:
  - type: Command
    name: Build & Push Docker image
    command: |
      echo "ðŸ”¨ Construyendo y subiendo imagen Docker..."
      cd MtdrSpring/backend
      # Usa la variable image_tag para versionar la imagen
      docker build \
        -t iad.ocir.io/axm8kysebnqa/reacttodo/s78fu/todolistapp-springboot:${image_tag} \
        -f Dockerfile \
        .
      docker push iad.ocir.io/axm8kysebnqa/reacttodo/s78fu/todolistapp-springboot:${image_tag}

outputArtifacts:
  - name: todolist-image
    type: DOCKER_IMAGE
    location: iad.ocir.io/axm8kysebnqa/reacttodo/s78fu/todolistapp-springboot:${image_tag}